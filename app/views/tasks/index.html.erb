<div class="container my-5">
  <div class="task-header">
    <div class="d-flex justify-content-between align-items-center">
      <h1><i class="fas fa-tasks"></i> Toutes mes tâches</h1>
      <%= link_to new_task_path, class: "btn btn-light" do %>
        <i class="fas fa-plus"></i> Créer une nouvelle tâche
      <% end %>
    </div>
  </div>

  <% if @tasks.empty? %>
    <div class="empty-state">
      <i class="fas fa-clipboard-list"></i>
      <p>Aucune tâche pour le moment. Créez-en une !</p>
    </div>
  <% else %>
    <% @tasks.each do |task| %>
      <div class="task-item <%= 'completed' if task.completed %>">

        <%= link_to toggle_completed_task_path(task), data: { turbo_method: :patch }, class: 'task-checkbox-link' do %>
          <i class="task-checkbox <%= task.completed ? 'fas fa-check-circle completed' : 'far fa-circle incomplete' %>"></i>
        <% end %>

        <div class="task-content">
          <%= link_to task_path(task), style: 'text-decoration: none; color: inherit;' do %>
            <h5 class="task-title"><%= task.title %></h5>
          <% end %>
        </div>

        <%= link_to task_path(task), class: 'delete-link',
            data: {
              turbo_method: :delete,
              turbo_confirm: "Êtes-vous sûr de vouloir supprimer '#{task.title}' ?"
            } do %>
          <i class="fas fa-trash text-danger"></i>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>
